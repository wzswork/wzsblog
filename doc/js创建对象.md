# JS创建对象

面向对象编程，有多种实现模式，JS的原型链也可以算是其中一种。当我初学JS的时候，第一次在JS高程上看到JS创建对象的方式，觉得十分有意思，因为之前接触的各种语言，你要创建一个对象，只需要一个class，然后就可以尽情的去搭建你的世界了，之后使用的时候，new一下，你就能轻松创建好一个你设计好的类的实体对象。但是高程上对一个“简单的”创建对象却给出了好几种不同的方式。说实话，当时看的有点晕晕乎乎的，什么工厂模式，构造函数模式，组合模式，原型模式，寄生构造什么的，一大堆，死记硬背下来也不知道哪个好用。

后来写了一段时间的JS，再回头看其创建对象。我开始想一个问题，这么多种模式的最终目的是什么。很简单就是创建一个对象并返回它，那么我看书的时候，只要抓住一个点，那些各种各样的模式，返回给了我什么，就可以抓住问题的关键。然后按图索骥，一步一步往上走，看这返回给我的东西是怎么加工成的，跟着书去分析，不要把代码当作一个黑盒一样的东西，好像我照着书这么配置一下，然后调用一下突然就有了一个对象。

当然，可能只有我才在初学的时候，对创建对象理解的很模糊，一是我以过去的经验来套用的JS的创建，因为class这个关键字，就有点像黑盒，我写了一个类，配置好一些东西，然后我new一下，我就得到了一个和我配置的类一样的对象。然后我面对JS这个可以说有些透明的对象创建过程，有点懵逼。其次可能当时看书也是不太细致，没想着仔细理解，想着先记下来再说，导致概念模模糊糊的。

在学习创建对象的各种方法时，有个前置知识，那就是JS中，new 这个关键字，到底有什么用。

其实说来也简单，当你使用new 去运行一个函数时，它干了这么几件事：

-创建了一个临时对象，并让函数的this指向了这个临时对象
-将所创建的临时对象的原型（__proto__）绑定为你这个函数的原型(prototype)
-返回所创建的这个临时对象,假如你显式的返回了一个对象，则不返回临时对象，但是如果显式返回的不是对象，仍会返回这个临时对象。

明白了new的作用有利于理解所谓构造函数，返回了什么东西。
那么既然new只干了这么几件事情，我完全可以不用new，写一个普通的函数就能为我创建一个对象。

    function createO(){
        var o = {};
        o.a = 1;
        return o;
    }
    var newObj = createObj();
如上面的函数，我运行这个函数时，创建了一个对象o，并返回给了obj。这样我就创建了一个新的o对象newObj，它只拥有一个属性a。看起来跟其他面向对象语言的class之类的，完全不沾边，但是它成功实现了创建一个对象，这件事情。那么每当我想要一个新的o对象时，我就调用一下这个函数就可以。这就是所谓的工厂模式。

    function O(){
        this.a = 1;
    }
    var newObj = new O();
当我不想自己去手动创建对象，返回对象等等一系列工作的时候，我用一下new操作，如上面的代码，这就是构造函数模式。
