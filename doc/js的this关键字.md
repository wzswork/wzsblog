# JS的this关键字

对于新手来说，JS中的this实在是很容易把人给绕晕的一个东西。很多人一开始看到类似这种代码：

    var _this = this;
    function a(){
        _this.a = 1;
    }
都会感觉莫名其妙。但是其实只要搞清楚this的几种绑定方式之后，会发现，其实机制也挺简单的。

## 在全局上下文中

this在全局上下文中，指代的就是全局对象，浏览器里面是window，node中就是global。

## 在函数中

-在被直接调用的函数中，this指代的仍然是全局对象，但是如果是严格模式，this就会变成undefined。

-在被call和apply的方式调用的函数中，this的值就是call和apply的第一个参数。

-在函数使用了bind()方法创建的新函数后，这个新函数的this值就是你所绑定的对象。无论这个新函数是怎么被调用的，哪怕是call和apply，或者将其作为某个对象的方法去调用也不能更改其this值，当然也无法bind第二次。

-在箭头函数的使用中，this的值会直接指向上下文，也就是说，你在全局环境使用箭头函数，this就指向全局对象，你在某个方法中使用箭头函数，this就会指向该方法所属的对象。

## 在方法中

this会指向该方法所属的对象。需要注意的是，哪怕是在原型链上继承到的方法，不是该对象本身的方法，this仍会指向该对象。

另外ES6新多出的getter setter语法也是一样，this会指向正在进行get set操作的对象。

还有就是使用new关键字。将函数作为对象的构造函数使用时，this会指向new关键字创造出来的临时对象。

## 在事件回调函数中

在使用addEventListener添加的事件函数中，this会指向触发事件的元素。而不是addEventListener添加的事件函数，有些浏览器将其指向了触发事件的函数，有些浏览器并未将其指向触发事件的函数，不建议使用。

在直接写在html中的内联事件函数中，this会指向其所绑定的元素。


===
基本上this的场景就这些了，对于我们常用的场景来说，只要注意函数的不同调用方法导致的this的改变就行，毕竟在对象中作为方法之类的调用时都是符合我们直观感受的，this会指向对象本身。