#闭包的概念

我们知道JS运行时，有个作用域链，后面的作用域可以引用前面作用域中的变量。
那么当一个函数引用了其外部作用域中的变量时，就构成了一个闭包。
新手听到这个名词很容易和封装的概念搞混淆，反正我就混淆了好一段时间。但其实闭包，指的并不是这个函数被封闭了，而是指这个函数在运行时的整个环境被封闭了，被打包了一样。
我们知道，JS的垃圾回收机制，主要是来源于C++的引用计数模式，当一个函数引用了一个外部的变量时，只要我们还保持着对这个函数的引用，那么即使该外部变量本身所在的作用域已经被销毁了，但由于仍然存在引用，这个外部变量不会被销毁。

举个最简单的例子。

    var o = (function(){
        var a=1;
        return function(){
            return a++;
        }
    })()

在这段代码里面，创建了一个即时运行的匿名函数，这个函数返回了一个函数给变量o；我们返回的这个函数就是一个闭包。在这个函数中，引用了即时匿名函数内的变量a，在即时匿名函数运行结束时，他的执行环境已经被销毁了，变量a所在的作用域也被销毁了，但是我们返回给o的函数仍然保持着对a的引用，因此变量a被保留了下来。


#闭包的使用

##